{"version":3,"file":"three.interactive.module.js","sources":["../src/index.js"],"sourcesContent":["import { Raycaster, Vector2 } from 'three';\n\nexport class InteractiveObject {\n  constructor(target, name) {\n    this.target = target;\n    this.name = name;\n    this.intersected = false;\n    this.distance = 0;\n  }\n}\n\nexport class InteractiveEvent {\n  constructor(type, originalEvent = null) {\n    this.cancelBubble = false;\n    this.type = type;\n    this.originalEvent = originalEvent;\n  }\n  stopPropagation() {\n    this.cancelBubble = true;\n  }\n}\n\nexport class InteractionManager {\n  constructor(renderer, camera, domElement) {\n    this.renderer = renderer;\n    this.camera = camera;\n    this.domElement = domElement;\n\n    this.mouse = new Vector2();\n\n    this.interactiveObjects = [];\n\n    this.raycaster = new Raycaster();\n\n    domElement.addEventListener('mousemove', this.onDocumentMouseMove, false);\n    domElement.addEventListener('click', this.onDocumentMouseClick, false);\n    domElement.addEventListener('mousedown', this.onDocumentMouseDown, false);\n    domElement.ownerDocument.addEventListener(\n      'mouseup',\n      this.onDocumentMouseUp,\n      false\n    );\n\n    domElement.addEventListener('touchstart', this.onDocumentTouchStart, false);\n    domElement.addEventListener('touchmove', this.onDocumentTouchMove, false);\n    domElement.addEventListener('touchend', this.onDocumentTouchEnd, false);\n\n    this.treatTouchEventsAsMouseEvents = true;\n  }\n\n  dispose = () => {\n    domElement.removeEventListener('mousemove', this.onDocumentMouseMove);\n    domElement.removeEventListener('click', this.onDocumentMouseClick);\n    domElement.removeEventListener('mousedown', this.onDocumentMouseDown);\n    domElement.ownerDocument.removeEventListener(\n      'mouseup',\n      this.onDocumentMouseUp\n    );\n\n    domElement.removeEventListener('touchstart', this.onDocumentTouchStart);\n    domElement.removeEventListener('touchmove', this.onDocumentTouchMove);\n    domElement.removeEventListener('touchend', this.onDocumentTouchEnd);\n  };\n\n  add = (model, names = []) => {\n    if (names.length > 0) {\n      names.forEach((name) => {\n        const modelObject = model.getObjectByName(name);\n        if (modelObject) {\n          const interactiveObject = new InteractiveObject(modelObject, name);\n          this.interactiveObjects.push(interactiveObject);\n        }\n      });\n    } else {\n      if (model) {\n        const interactiveObject = new InteractiveObject(model, model.name);\n        this.interactiveObjects.push(interactiveObject);\n      }\n    }\n  };\n\n  remove = (model, names = []) => {\n    if (names.length > 0) {\n      const interactiveObjectsNew = [];\n      this.interactiveObjects.forEach((object) => {\n        if (!names.includes(object.name)) {\n          interactiveObjectsNew.push(object);\n        }\n      });\n      this.interactiveObjects = interactiveObjectsNew;\n    } else {\n      if (model) {\n        const interactiveObjectsNew = [];\n        this.interactiveObjects.forEach((object) => {\n          if (object.name !== model.name) {\n            interactiveObjectsNew.push(object);\n          }\n        });\n        this.interactiveObjects = interactiveObjectsNew;\n      }\n    }\n  };\n\n  update = () => {\n    this.raycaster.setFromCamera(this.mouse, this.camera);\n\n    // console.log( scene.children );\n\n    this.interactiveObjects.forEach((object) => {\n      if (object.target) this.checkIntersection(object);\n    });\n\n    this.interactiveObjects.sort(function (a, b) {\n      return a.distance - b.distance;\n    });\n\n    const eventOut = new InteractiveEvent('mouseout');\n    this.interactiveObjects.forEach((object) => {\n      if (!object.intersected && object.wasIntersected) {\n        this.dispatch(object, eventOut);\n      }\n    });\n    const eventOver = new InteractiveEvent('mouseover');\n    this.interactiveObjects.forEach((object) => {\n      if (object.intersected && !object.wasIntersected) {\n        this.dispatch(object, eventOver);\n      }\n    });\n  };\n\n  checkIntersection = (object) => {\n    var intersects = this.raycaster.intersectObjects([object.target], true);\n\n    object.wasIntersected = object.intersected;\n\n    if (intersects.length > 0) {\n      let distance = intersects[0].distance;\n      intersects.forEach((i) => {\n        if (i.distance < distance) {\n          distance = i.distance;\n        }\n      });\n      object.intersected = true;\n      object.distance = distance;\n    } else {\n      object.intersected = false;\n    }\n  };\n\n  onDocumentMouseMove = (mouseEvent) => {\n    // event.preventDefault();\n\n    this.mapPositionToPoint(this.mouse, mouseEvent.clientX, mouseEvent.clientY);\n\n    const event = new InteractiveEvent('mousemove', mouseEvent);\n\n    this.interactiveObjects.forEach((object) => {\n      this.dispatch(object, event);\n    });\n  };\n\n  onDocumentTouchMove = (touchEvent) => {\n    // event.preventDefault();\n\n    this.mapPositionToPoint(\n      this.mouse,\n      touchEvent.touches[0].clientX,\n      touchEvent.touches[0].clientY\n    );\n\n    const event = new InteractiveEvent(\n      this.treatTouchEventsAsMouseEvents ? 'mousemove' : 'touchmove',\n      touchEvent\n    );\n\n    this.interactiveObjects.forEach((object) => {\n      this.dispatch(object, event);\n    });\n  };\n\n  onDocumentMouseClick = (mouseEvent) => {\n    this.update();\n\n    const event = new InteractiveEvent('click', mouseEvent);\n\n    this.interactiveObjects.forEach((object) => {\n      if (object.intersected) {\n        this.dispatch(object, event);\n      }\n    });\n  };\n\n  onDocumentMouseDown = (mouseEvent) => {\n    this.update();\n\n    const event = new InteractiveEvent('mousedown', mouseEvent);\n\n    this.interactiveObjects.forEach((object) => {\n      if (object.intersected) {\n        this.dispatch(object, event);\n      }\n    });\n  };\n\n  onDocumentTouchStart = (touchEvent) => {\n    this.mapPositionToPoint(\n      this.mouse,\n      touchEvent.touches[0].clientX,\n      touchEvent.touches[0].clientY\n    );\n\n    this.update();\n\n    const event = new InteractiveEvent(\n      this.treatTouchEventsAsMouseEvents ? 'mousedown' : 'touchstart',\n      touchEvent\n    );\n\n    this.interactiveObjects.forEach((object) => {\n      if (object.intersected) {\n        this.dispatch(object, event);\n      }\n    });\n  };\n\n  onDocumentMouseUp = (mouseEvent) => {\n    const event = new InteractiveEvent('mouseup', mouseEvent);\n\n    this.interactiveObjects.forEach((object) => {\n      this.dispatch(object, event);\n    });\n  };\n\n  onDocumentTouchEnd = (touchEvent) => {\n    this.mapPositionToPoint(\n      this.mouse,\n      touchEvent.touches[0].clientX,\n      touchEvent.touches[0].clientY\n    );\n\n    this.update();\n\n    const event = new InteractiveEvent(\n      this.treatTouchEventsAsMouseEvents ? 'mouseup' : 'touchend',\n      touchEvent\n    );\n\n    this.interactiveObjects.forEach((object) => {\n      this.dispatch(object, event);\n    });\n  };\n\n  dispatch = (object, event) => {\n    if (object.target && !event.cancelBubble) {\n      event.coords = this.mouse;\n      event.distance = object.distance;\n      event.intersected = object.intersected;\n      object.target.dispatchEvent(event);\n    }\n  };\n\n  mapPositionToPoint = (point, x, y) => {\n    let rect;\n\n    // IE 11 fix\n    if (!this.renderer.domElement.parentElement) {\n      rect = {\n        x: 0,\n        y: 0,\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0,\n      };\n    } else {\n      rect = this.renderer.domElement.getBoundingClientRect();\n    }\n\n    point.x = ((x - rect.left) / rect.width) * 2 - 1;\n    point.y = -((y - rect.top) / rect.height) * 2 + 1;\n  };\n}\n"],"names":["InteractiveObject","target","name","intersected","distance","InteractiveEvent","type","originalEvent","cancelBubble","InteractionManager","renderer","camera","domElement","dispose","removeEventListener","onDocumentMouseMove","onDocumentMouseClick","onDocumentMouseDown","ownerDocument","onDocumentMouseUp","onDocumentTouchStart","onDocumentTouchMove","onDocumentTouchEnd","add","model","names","length","forEach","modelObject","getObjectByName","interactiveObject","interactiveObjects","push","remove","interactiveObjectsNew","object","includes","update","raycaster","setFromCamera","mouse","checkIntersection","sort","a","b","eventOut","wasIntersected","dispatch","eventOver","intersects","intersectObjects","i","mouseEvent","mapPositionToPoint","clientX","clientY","event","touchEvent","touches","treatTouchEventsAsMouseEvents","coords","dispatchEvent","point","x","y","rect","parentElement","left","top","width","height","getBoundingClientRect","Vector2","Raycaster","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;IAEaA,iBAAb,GACE,2BAAYC,MAAZ,EAAoBC,IAApB,EAA0B;AAAA;;AACxB,OAAKD,MAAL,GAAcA,MAAd;AACA,OAAKC,IAAL,GAAYA,IAAZ;AACA,OAAKC,WAAL,GAAmB,KAAnB;AACA,OAAKC,QAAL,GAAgB,CAAhB;AACD;IAGUC,gBAAb;AACE,4BAAYC,IAAZ,EAAwC;AAAA,QAAtBC,aAAsB,uEAAN,IAAM;;AAAA;;AACtC,SAAKC,YAAL,GAAoB,KAApB;AACA,SAAKF,IAAL,GAAYA,IAAZ;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACD;;AALH;AAAA;AAAA,sCAMoB;AAChB,WAAKC,YAAL,GAAoB,IAApB;AACD;AARH;;AAAA;AAAA;IAWaC,kBAAb,GACE,4BAAYC,QAAZ,EAAsBC,MAAtB,EAA8BC,WAA9B,EAA0C;AAAA;;AAAA;;AAAA,OA2B1CC,OA3B0C,GA2BhC,YAAM;AACdD,IAAAA,UAAU,CAACE,mBAAX,CAA+B,WAA/B,EAA4C,KAAI,CAACC,mBAAjD;AACAH,IAAAA,UAAU,CAACE,mBAAX,CAA+B,OAA/B,EAAwC,KAAI,CAACE,oBAA7C;AACAJ,IAAAA,UAAU,CAACE,mBAAX,CAA+B,WAA/B,EAA4C,KAAI,CAACG,mBAAjD;AACAL,IAAAA,UAAU,CAACM,aAAX,CAAyBJ,mBAAzB,CACE,SADF,EAEE,KAAI,CAACK,iBAFP;AAKAP,IAAAA,UAAU,CAACE,mBAAX,CAA+B,YAA/B,EAA6C,KAAI,CAACM,oBAAlD;AACAR,IAAAA,UAAU,CAACE,mBAAX,CAA+B,WAA/B,EAA4C,KAAI,CAACO,mBAAjD;AACAT,IAAAA,UAAU,CAACE,mBAAX,CAA+B,UAA/B,EAA2C,KAAI,CAACQ,kBAAhD;AACD,GAvCyC;;AAAA,OAyC1CC,GAzC0C,GAyCpC,UAACC,KAAD,EAAuB;AAAA,QAAfC,KAAe,uEAAP,EAAO;;AAC3B,QAAIA,KAAK,CAACC,MAAN,GAAe,CAAnB,EAAsB;AACpBD,MAAAA,KAAK,CAACE,OAAN,CAAc,UAACzB,IAAD,EAAU;AACtB,YAAM0B,WAAW,GAAGJ,KAAK,CAACK,eAAN,CAAsB3B,IAAtB,CAApB;;AACA,YAAI0B,WAAJ,EAAiB;AACf,cAAME,iBAAiB,GAAG,IAAI9B,iBAAJ,CAAsB4B,WAAtB,EAAmC1B,IAAnC,CAA1B;;AACA,UAAA,KAAI,CAAC6B,kBAAL,CAAwBC,IAAxB,CAA6BF,iBAA7B;AACD;AACF,OAND;AAOD,KARD,MAQO;AACL,UAAIN,KAAJ,EAAW;AACT,YAAMM,iBAAiB,GAAG,IAAI9B,iBAAJ,CAAsBwB,KAAtB,EAA6BA,KAAK,CAACtB,IAAnC,CAA1B;;AACA,QAAA,KAAI,CAAC6B,kBAAL,CAAwBC,IAAxB,CAA6BF,iBAA7B;AACD;AACF;AACF,GAxDyC;;AAAA,OA0D1CG,MA1D0C,GA0DjC,UAACT,KAAD,EAAuB;AAAA,QAAfC,KAAe,uEAAP,EAAO;;AAC9B,QAAIA,KAAK,CAACC,MAAN,GAAe,CAAnB,EAAsB;AACpB,UAAMQ,qBAAqB,GAAG,EAA9B;;AACA,MAAA,KAAI,CAACH,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,YAAI,CAACV,KAAK,CAACW,QAAN,CAAeD,MAAM,CAACjC,IAAtB,CAAL,EAAkC;AAChCgC,UAAAA,qBAAqB,CAACF,IAAtB,CAA2BG,MAA3B;AACD;AACF,OAJD;;AAKA,MAAA,KAAI,CAACJ,kBAAL,GAA0BG,qBAA1B;AACD,KARD,MAQO;AACL,UAAIV,KAAJ,EAAW;AACT,YAAMU,sBAAqB,GAAG,EAA9B;;AACA,QAAA,KAAI,CAACH,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,cAAIA,MAAM,CAACjC,IAAP,KAAgBsB,KAAK,CAACtB,IAA1B,EAAgC;AAC9BgC,YAAAA,sBAAqB,CAACF,IAAtB,CAA2BG,MAA3B;AACD;AACF,SAJD;;AAKA,QAAA,KAAI,CAACJ,kBAAL,GAA0BG,sBAA1B;AACD;AACF;AACF,GA9EyC;;AAAA,OAgF1CG,MAhF0C,GAgFjC,YAAM;AACb,IAAA,KAAI,CAACC,SAAL,CAAeC,aAAf,CAA6B,KAAI,CAACC,KAAlC,EAAyC,KAAI,CAAC7B,MAA9C,EADa;;;AAKb,IAAA,KAAI,CAACoB,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,UAAIA,MAAM,CAAClC,MAAX,EAAmB,KAAI,CAACwC,iBAAL,CAAuBN,MAAvB;AACpB,KAFD;;AAIA,IAAA,KAAI,CAACJ,kBAAL,CAAwBW,IAAxB,CAA6B,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC3C,aAAOD,CAAC,CAACvC,QAAF,GAAawC,CAAC,CAACxC,QAAtB;AACD,KAFD;;AAIA,QAAMyC,QAAQ,GAAG,IAAIxC,gBAAJ,CAAqB,UAArB,CAAjB;;AACA,IAAA,KAAI,CAAC0B,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,UAAI,CAACA,MAAM,CAAChC,WAAR,IAAuBgC,MAAM,CAACW,cAAlC,EAAkD;AAChD,QAAA,KAAI,CAACC,QAAL,CAAcZ,MAAd,EAAsBU,QAAtB;AACD;AACF,KAJD;;AAKA,QAAMG,SAAS,GAAG,IAAI3C,gBAAJ,CAAqB,WAArB,CAAlB;;AACA,IAAA,KAAI,CAAC0B,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,UAAIA,MAAM,CAAChC,WAAP,IAAsB,CAACgC,MAAM,CAACW,cAAlC,EAAkD;AAChD,QAAA,KAAI,CAACC,QAAL,CAAcZ,MAAd,EAAsBa,SAAtB;AACD;AACF,KAJD;AAKD,GAzGyC;;AAAA,OA2G1CP,iBA3G0C,GA2GtB,UAACN,MAAD,EAAY;AAC9B,QAAIc,UAAU,GAAG,KAAI,CAACX,SAAL,CAAeY,gBAAf,CAAgC,CAACf,MAAM,CAAClC,MAAR,CAAhC,EAAiD,IAAjD,CAAjB;;AAEAkC,IAAAA,MAAM,CAACW,cAAP,GAAwBX,MAAM,CAAChC,WAA/B;;AAEA,QAAI8C,UAAU,CAACvB,MAAX,GAAoB,CAAxB,EAA2B;AACzB,UAAItB,QAAQ,GAAG6C,UAAU,CAAC,CAAD,CAAV,CAAc7C,QAA7B;AACA6C,MAAAA,UAAU,CAACtB,OAAX,CAAmB,UAACwB,CAAD,EAAO;AACxB,YAAIA,CAAC,CAAC/C,QAAF,GAAaA,QAAjB,EAA2B;AACzBA,UAAAA,QAAQ,GAAG+C,CAAC,CAAC/C,QAAb;AACD;AACF,OAJD;AAKA+B,MAAAA,MAAM,CAAChC,WAAP,GAAqB,IAArB;AACAgC,MAAAA,MAAM,CAAC/B,QAAP,GAAkBA,QAAlB;AACD,KATD,MASO;AACL+B,MAAAA,MAAM,CAAChC,WAAP,GAAqB,KAArB;AACD;AACF,GA5HyC;;AAAA,OA8H1CY,mBA9H0C,GA8HpB,UAACqC,UAAD,EAAgB;AACpC;AAEA,IAAA,KAAI,CAACC,kBAAL,CAAwB,KAAI,CAACb,KAA7B,EAAoCY,UAAU,CAACE,OAA/C,EAAwDF,UAAU,CAACG,OAAnE;;AAEA,QAAMC,KAAK,GAAG,IAAInD,gBAAJ,CAAqB,WAArB,EAAkC+C,UAAlC,CAAd;;AAEA,IAAA,KAAI,CAACrB,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,MAAA,KAAI,CAACY,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD,KAFD;AAGD,GAxIyC;;AAAA,OA0I1CnC,mBA1I0C,GA0IpB,UAACoC,UAAD,EAAgB;AACpC;AAEA,IAAA,KAAI,CAACJ,kBAAL,CACE,KAAI,CAACb,KADP,EAEEiB,UAAU,CAACC,OAAX,CAAmB,CAAnB,EAAsBJ,OAFxB,EAGEG,UAAU,CAACC,OAAX,CAAmB,CAAnB,EAAsBH,OAHxB;;AAMA,QAAMC,KAAK,GAAG,IAAInD,gBAAJ,CACZ,KAAI,CAACsD,6BAAL,GAAqC,WAArC,GAAmD,WADvC,EAEZF,UAFY,CAAd;;AAKA,IAAA,KAAI,CAAC1B,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,MAAA,KAAI,CAACY,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD,KAFD;AAGD,GA3JyC;;AAAA,OA6J1CxC,oBA7J0C,GA6JnB,UAACoC,UAAD,EAAgB;AACrC,IAAA,KAAI,CAACf,MAAL;;AAEA,QAAMmB,KAAK,GAAG,IAAInD,gBAAJ,CAAqB,OAArB,EAA8B+C,UAA9B,CAAd;;AAEA,IAAA,KAAI,CAACrB,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,UAAIA,MAAM,CAAChC,WAAX,EAAwB;AACtB,QAAA,KAAI,CAAC4C,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD;AACF,KAJD;AAKD,GAvKyC;;AAAA,OAyK1CvC,mBAzK0C,GAyKpB,UAACmC,UAAD,EAAgB;AACpC,IAAA,KAAI,CAACf,MAAL;;AAEA,QAAMmB,KAAK,GAAG,IAAInD,gBAAJ,CAAqB,WAArB,EAAkC+C,UAAlC,CAAd;;AAEA,IAAA,KAAI,CAACrB,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,UAAIA,MAAM,CAAChC,WAAX,EAAwB;AACtB,QAAA,KAAI,CAAC4C,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD;AACF,KAJD;AAKD,GAnLyC;;AAAA,OAqL1CpC,oBArL0C,GAqLnB,UAACqC,UAAD,EAAgB;AACrC,IAAA,KAAI,CAACJ,kBAAL,CACE,KAAI,CAACb,KADP,EAEEiB,UAAU,CAACC,OAAX,CAAmB,CAAnB,EAAsBJ,OAFxB,EAGEG,UAAU,CAACC,OAAX,CAAmB,CAAnB,EAAsBH,OAHxB;;AAMA,IAAA,KAAI,CAAClB,MAAL;;AAEA,QAAMmB,KAAK,GAAG,IAAInD,gBAAJ,CACZ,KAAI,CAACsD,6BAAL,GAAqC,WAArC,GAAmD,YADvC,EAEZF,UAFY,CAAd;;AAKA,IAAA,KAAI,CAAC1B,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,UAAIA,MAAM,CAAChC,WAAX,EAAwB;AACtB,QAAA,KAAI,CAAC4C,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD;AACF,KAJD;AAKD,GAxMyC;;AAAA,OA0M1CrC,iBA1M0C,GA0MtB,UAACiC,UAAD,EAAgB;AAClC,QAAMI,KAAK,GAAG,IAAInD,gBAAJ,CAAqB,SAArB,EAAgC+C,UAAhC,CAAd;;AAEA,IAAA,KAAI,CAACrB,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,MAAA,KAAI,CAACY,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD,KAFD;AAGD,GAhNyC;;AAAA,OAkN1ClC,kBAlN0C,GAkNrB,UAACmC,UAAD,EAAgB;AACnC,IAAA,KAAI,CAACJ,kBAAL,CACE,KAAI,CAACb,KADP,EAEEiB,UAAU,CAACC,OAAX,CAAmB,CAAnB,EAAsBJ,OAFxB,EAGEG,UAAU,CAACC,OAAX,CAAmB,CAAnB,EAAsBH,OAHxB;;AAMA,IAAA,KAAI,CAAClB,MAAL;;AAEA,QAAMmB,KAAK,GAAG,IAAInD,gBAAJ,CACZ,KAAI,CAACsD,6BAAL,GAAqC,SAArC,GAAiD,UADrC,EAEZF,UAFY,CAAd;;AAKA,IAAA,KAAI,CAAC1B,kBAAL,CAAwBJ,OAAxB,CAAgC,UAACQ,MAAD,EAAY;AAC1C,MAAA,KAAI,CAACY,QAAL,CAAcZ,MAAd,EAAsBqB,KAAtB;AACD,KAFD;AAGD,GAnOyC;;AAAA,OAqO1CT,QArO0C,GAqO/B,UAACZ,MAAD,EAASqB,KAAT,EAAmB;AAC5B,QAAIrB,MAAM,CAAClC,MAAP,IAAiB,CAACuD,KAAK,CAAChD,YAA5B,EAA0C;AACxCgD,MAAAA,KAAK,CAACI,MAAN,GAAe,KAAI,CAACpB,KAApB;AACAgB,MAAAA,KAAK,CAACpD,QAAN,GAAiB+B,MAAM,CAAC/B,QAAxB;AACAoD,MAAAA,KAAK,CAACrD,WAAN,GAAoBgC,MAAM,CAAChC,WAA3B;AACAgC,MAAAA,MAAM,CAAClC,MAAP,CAAc4D,aAAd,CAA4BL,KAA5B;AACD;AACF,GA5OyC;;AAAA,OA8O1CH,kBA9O0C,GA8OrB,UAACS,KAAD,EAAQC,CAAR,EAAWC,CAAX,EAAiB;AACpC,QAAIC,IAAJ,CADoC;;AAIpC,QAAI,CAAC,KAAI,CAACvD,QAAL,CAAcE,UAAd,CAAyBsD,aAA9B,EAA6C;AAC3CD,MAAAA,IAAI,GAAG;AACLF,QAAAA,CAAC,EAAE,CADE;AAELC,QAAAA,CAAC,EAAE,CAFE;AAGLG,QAAAA,IAAI,EAAE,CAHD;AAILC,QAAAA,GAAG,EAAE,CAJA;AAKLC,QAAAA,KAAK,EAAE,CALF;AAMLC,QAAAA,MAAM,EAAE;AANH,OAAP;AAQD,KATD,MASO;AACLL,MAAAA,IAAI,GAAG,KAAI,CAACvD,QAAL,CAAcE,UAAd,CAAyB2D,qBAAzB,EAAP;AACD;;AAEDT,IAAAA,KAAK,CAACC,CAAN,GAAW,CAACA,CAAC,GAAGE,IAAI,CAACE,IAAV,IAAkBF,IAAI,CAACI,KAAxB,GAAiC,CAAjC,GAAqC,CAA/C;AACAP,IAAAA,KAAK,CAACE,CAAN,GAAU,EAAE,CAACA,CAAC,GAAGC,IAAI,CAACG,GAAV,IAAiBH,IAAI,CAACK,MAAxB,IAAkC,CAAlC,GAAsC,CAAhD;AACD,GAjQyC;;AACxC,OAAK5D,QAAL,GAAgBA,QAAhB;AACA,OAAKC,MAAL,GAAcA,MAAd;AACA,OAAKC,UAAL,GAAkBA,WAAlB;AAEA,OAAK4B,KAAL,GAAa,IAAIgC,OAAJ,EAAb;AAEA,OAAKzC,kBAAL,GAA0B,EAA1B;AAEA,OAAKO,SAAL,GAAiB,IAAImC,SAAJ,EAAjB;;AAEA7D,EAAAA,WAAU,CAAC8D,gBAAX,CAA4B,WAA5B,EAAyC,KAAK3D,mBAA9C,EAAmE,KAAnE;;AACAH,EAAAA,WAAU,CAAC8D,gBAAX,CAA4B,OAA5B,EAAqC,KAAK1D,oBAA1C,EAAgE,KAAhE;;AACAJ,EAAAA,WAAU,CAAC8D,gBAAX,CAA4B,WAA5B,EAAyC,KAAKzD,mBAA9C,EAAmE,KAAnE;;AACAL,EAAAA,WAAU,CAACM,aAAX,CAAyBwD,gBAAzB,CACE,SADF,EAEE,KAAKvD,iBAFP,EAGE,KAHF;;AAMAP,EAAAA,WAAU,CAAC8D,gBAAX,CAA4B,YAA5B,EAA0C,KAAKtD,oBAA/C,EAAqE,KAArE;;AACAR,EAAAA,WAAU,CAAC8D,gBAAX,CAA4B,WAA5B,EAAyC,KAAKrD,mBAA9C,EAAmE,KAAnE;;AACAT,EAAAA,WAAU,CAAC8D,gBAAX,CAA4B,UAA5B,EAAwC,KAAKpD,kBAA7C,EAAiE,KAAjE;;AAEA,OAAKqC,6BAAL,GAAqC,IAArC;AACD;;;;"}